
はじめまして、nkitaoといいます。  
35歳にして、急に個人開発に目覚めた社内SEです。  
趣味や何かに没頭することに年齢なんて関係ないですよね！  

作ったものをいろいろな方に使っていただきたいと思い、投稿することに決めました。
zennは初投稿です。お手柔らかにお願いします。 🙇


# 作ったもの
[コミットメッセージ作成ツール](https://shiba-tools.dev/tools/commit-support-original)
![](https://storage.googleapis.com/zenn-user-upload/11b6c623d039-20240309.png)
https://shiba-tools.dev/tools/commit-support-original


# コミットメッセージ作成ツールとは？
コミットメッセージの作成をサポートするためのツールになります。
コミットメッセージの作成時・または過去のコミットログを振り返った時に下記のように困ったことはないでしょうか？

* メッセージが統一されておらずわかりずらい
* プロジェクトごとにフォーマットが異なる
* スコープの名称に揺れがある
* プロジェクト事にフォーマットを変更したい
* 絵文字を使って華やかにしたい

このツールはそのような課題を解決するために作成しました。  
コミットメッセージのフォーマッターやツールとしては、[commitizen](https://github.com/commitizen/cz-cli)や[git-za](https://github.com/streamich/git-cz)、[commit.template](https://git-scm.com/book/ja/v2/Git-%E3%81%AE%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA-Git-%E3%81%AE%E8%A8%AD%E5%AE%9A)等、本当に素晴らしい便利なツールが様々ありますが、それらとの差別化としては下記が挙げられます。

* Webベースですぐに利用可能
* インストール不要
* テンプレート・フォーマットの作成もGUIベースでわかりやすい
* 過去の入力内容を記憶（再利用）

また、手軽に使っていただきたいという思いから、ログイン不要で設定情報は全てブラウザ内に保存される設計にしています。


# 使い方
使い方は非常にシンプルで、画面へアクセス後、種別、要約や本文などの入力・選択された情報を基に、
フォーマットされたコミットメッセージが自動的に作成されます。
あらかじめ用意しているフォーム・フォーマットは有名な[Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0-beta.4/)や[AngularのCommit Message Format](https://github.com/angular/angular/blob/68a6a07/CONTRIBUTING.md#commit)等を参考にしています。
また、このツールはカスタマイズモードを利用して自分好みにカスタマイズすることも可能です。
参加中のプロジェクトや個人開発の方針に合わせて是非ご活用いたあｄければと思います。
詳細な使い方はサイトにも記載しているので、是非こちらもご覧いただければと思います！！
[コミットメッセージ作成ツール](https://shiba-tools.dev/tools/commit-support-original)


# 使用した主な技術
コミットメッセージ作成ツールでは、以下の技術を使用して開発しました。  
* **React**
* **Nextjs**
* **shadcn/ui** 
* **tailwindcss** 
* **emoji-mart** 
* **react-hook-form** 
* **dexie** 
* **react-hotkeys-hook**
* **react-markdown** 

どれもとても素晴らしくリスペクトしかありません👏
せっかくなので、各技術の選定理由も記載します。
## 選定理由
### [React](https://ja.react.dev/)
「モダン　フロント　人気」で検索して、一番人気ありそうなものを選定しました。
以前AngularJSを使っていたので、その流れでAngularとも思ったのですが、せっかく新たに開発することになるので、触ったことのないReactで実装してみたなと思ったのも理由の一つです。
https://ja.react.dev/

### [NEXT.js](https://nextjs.org/)
フロントのWebフレームワークとしてほぼ必要な機能がそろっており、[Vecel](https://vercel.com/)を利用することで、簡単・スムーズに本番環境へデプロイでき、かつ、hobbyプラン（無料）という神プランがあるという理由で選びました。
バージョンは14.1.0でAppRouterを採用しています。
爆速で開発からリリースまで短時間でサクサク進められる開発体験は非常に良かったです。
ただ、サイトマップの仕様で一部利用できなかったり、独自な機能が多くあり若干ですが不満があったりしました。
次の開発ではWeb標準に基づいて設計されているというRemixも使ってみたいなと思いました。
https://nextjs.org/

###  [tailwindcss](https://tailwindcss.com/)
これまでの個人開発では[Chakra UI](https://chakra-ui.com/)や[MUI](https://mui.com/)などを利用していましたが、細かなデザインをしたい場合や外部ライブラリを導入した際のデザイン調整で苦労したことがあり、思い切って今回はtailwindcssを利用しました。(※誤解がないように記載しておくと、Chakra UIもMUIもとても素晴らしいライブラリです、苦労したと書いていますがあくまで私の感想+技術力の問題であり、これらのツールを否定する意図は全くありません。)
記述量は非常に多くなりましたが、直感的で自分の思った通りのデザインをかけるのは狙いどおりで採用してよかったと感じています。
ただ、主要なコンポーネント（各種フォーム、ポップアップ等）のデザインを一から作成することになるので、その辺りは後述のshadcn/uiを利用しています。
※デザイン云々いっていますが、私自身まったくデザインセンスはありません。CSSフレームワークにおんぶに抱っこ状態です。「思った通りのデザイン」というのはあくまで微調整で範囲で行っているデザインになります。大枠のデザインについてはshadcn/uiにゆだねてます。
https://tailwindcss.com/

###  [shadcn/ui](https://ui.shadcn.com/)
デザインは細かく調整したいけど、一から全てのコンポーネントのデザインを考えるのは、ちょっとつらい。ある程度デザインとしてまとまったものが欲しい。
とワガママな願望でで色々とネットを漁っていたところ。
shadcn/uiに出会いました。  
[Docs](https://ui.shadcn.com/docs) の**Introduction**にも記載されていますが、  
> Pick the components you need. Copy and paste the code into your project and customize to your needs. The code is yours. Use this as a reference to build your own component libraries.
> 
>必要なコンポーネントを選択し、そのコードをプロジェクトにコピーして貼り付け、必要に応じてカスタマイズします。コードはあなたのものです。これを参考にして独自のコンポーネントライブラリを構築してください。

という紹介があり、「これだー！」と思い導入しました。
[Examples](https://ui.shadcn.com/examples/mail)のページはモノクロのクールなデザインで統一されていますが、[Themes](https://ui.shadcn.com/themes)にはその他のカラーパターンもあるので、サイトのイメージカラーにある程度合わせて作成することができるのも魅力の一つでした。
本ツールではGreenを採用しています。
https://ui.shadcn.com/

### [react-hook-form](https://react-hook-form.com/)
shadcn/uiの[Form](https://ui.shadcn.com/docs/components/form)を利用する際にreact-hook-formを利用した例が提示されていたことと、別の個人開発でも利用した経験があったため選定しました。
はじめて利用したときは１つのフォームを作成するのにその他必要な設定や記述が多く不安でしたが、今回のコミットメッセージではまさにフォームへの入力情報や属性値の情報が肝となるため、結果的には採用してよかったと思いました。（このライブラリの能力を活かしきれているかどうかは別の話です。）
https://react-hook-form.com/

### [dexie](https://dexie.org/docs/Tutorial/React)
ブラウザへのデータ保存方法としては、cookieやlocalStorage、IndexedDBなどありますが、本ツールにおいては利用者によって保存されるテンプレート数が異なり、説明文などの情報を入力することができるので、IndexedDBを利用したいと思っていました。
軽微な設定値であればlocalStorageからデータを取得できるhookを自作していましたが、IndexedDBだとその辺の実装だけでもそれなりに工数がかかりそうだったので、dexieを導入しました。useLiveQueryや、トランザクションなどが機能は多く容易されていますが、利用方法は非常にシンプルですのでもし使う機会があればおすすめします。
https://dexie.org/docs/Tutorial/React

### emoji-mart, react-hotkeys-hook, react-markdown
その他のライブラリについてもいろいろと理由はありますが、githubやnpmを検索して、スターの数やメンテナンスの間隔とかで決めたりしました。
https://github.com/missive/emoji-mart
https://github.com/JohannesKlauss/react-hotkeys-hook
https://github.com/remarkjs/react-markdown

# 大変だったところ
・入力フォームのレイアウトを作るにあたり、既存で利用されているコミットメっセージのフォーマッターをいくつか調べました。
　よくありそうなのは、上記でも記述していますが、
　　・commi・・
　　・Angular
など、仕様自体はそれほど多くはないのですが、どのような形でWebのUIに落とし込むのか結構考えました。
自分の中では割と満足したものができたが、使っていく内に不満がでてくるかも。テスト的にAngularプロジェクトのコミットメッセージフォーマットも作ってます。よろしければそちらも御覧ください。


# こだわったところ

## デザイン
どう配置すれば、直感的に操作できるだろうや、デザインや配置はいろいろと考えながら実装しました。
まだまだ改善の余地はあるかと思いますが、一旦は納得するものができたと思っています。
どなたかサイトのフィードバックのフォームでも結構ですの、フィードバックいただけると泣いて喜びます。

## 保存できるドロップダウン
スコープの項目の動的ドロップダウン（Dynamic-Dropdown）になります。
コミットメッセージを作成する際、以前入力した情報を再利用したいケースがありますが、以前どんな記述をしたのか思い出すのにログを漁るのは正直骨が折れる。種別であればある程度固定だがスコープは開発が進むに連れてどんどん増えてくるので、自動保存があると嬉しいなと常々思っていました。

## キーボードファースト
Webサービスとなると一度アクセスする必要があり、どうしても１手間かかってしまいます。
このあたりはどうしようもないのですが、少なくともメッセージを作成する上でマウスでカチカチしなくてもキーボードから手を離さずに
コミットメッセージを作成できるように心がけました。

# 今後の展望
今後の展望としては、以下の機能を追加したいなと思っています。

* テンプレートの共有機能
* 詳細な設定の変更機能（項目の説明文章編集、置換文字の変更など）
* 過去のコミットメッセージのログの自動保存

よりチームで利用する用のツールになると思うのですが、利用者が少なければ
自分だけで使うことになるので、様子見ながら開発しようと思っています。


# 最後に
ここまで読んでいただきありがとうございます！！
個人開発していると、本当にこのデザイン(UI)でわかりやすいのか？使いやすいのか？
なお、色々不安になることがたくさんあったのですが、
ひとまず形として出来上がったことと、このように記事を含めて公開できたことが非常に嬉しいです。

誰かの「こういうのほしかった」な気持ちに刺さればいいなと思っています。